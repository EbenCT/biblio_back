{
	"info": {
		"_postman_id": "graphql-biblioteca-api",
		"name": "üìö GraphQL - Sistema Biblioteca",
		"description": "Colecci√≥n completa de consultas GraphQL para el sistema de biblioteca\n\n**Endpoints:**\n- GraphQL: `POST http://localhost:8080/graphql`\n- GraphiQL: `GET http://localhost:8080/graphiql`\n\n**Entidades disponibles:**\n- üìñ Libros (CRUD + consultas especiales)\n- üë• Miembros (CRUD completo)\n- üìã Pr√©stamos (CRUD + gesti√≥n avanzada)\n- üë§ Usuarios (CRUD + operaciones espec√≠ficas)\n- üö™ Acceso Biblioteca (CRUD + ingreso/egreso m√≥vil)\n- üîê Autenticaci√≥n (login/registro)\n\n**Instrucciones:**\n1. Aseg√∫rate de que el servidor est√© corriendo en `http://localhost:8080`\n2. Para mutaciones que requieren autenticaci√≥n, obt√©n un token con `login` primero\n3. Usa el token en el header `Authorization: Bearer <token>`",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîê Autenticaci√≥n",
			"item": [
				{
					"name": "Login Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation LoginUsuario($loginRequest: LoginRequest!) { login(loginRequest: $loginRequest) { token user { id email } } }\",\n  \"variables\": {\n    \"loginRequest\": {\n      \"email\": \"admin@biblioteca.com\",\n      \"password\": \"123456\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Iniciar sesi√≥n con email y contrase√±a. Retorna token JWT para autenticaci√≥n."
					}
				},
				{
					"name": "Registrar Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation RegistrarUsuario($registerRequest: RegisterRequest!) { registrar(registerRequest: $registerRequest) { token user { id email } } }\",\n  \"variables\": {\n    \"registerRequest\": {\n      \"email\": \"nuevo@biblioteca.com\",\n      \"password\": \"123456\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar nuevo usuario en el sistema. Retorna token JWT autom√°ticamente."
					}
				}
			]
		},
		{
			"name": "üìñ Libros",
			"item": [
				{
					"name": "üìã Obtener Todos los Libros",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerLibros { libros { id titulo autor categoria disponible createdAt updatedAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista completa de todos los libros en la biblioteca"
					}
				},
				{
					"name": "üîç Obtener Libro por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerLibro($id: ID!) { libro(id: $id) { id titulo autor categoria disponible createdAt updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener un libro espec√≠fico por su ID"
					}
				},
				{
					"name": "üìö Libros por Categor√≠a",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query LibrosPorCategoria($categoria: String!) { librosPorCategoria(categoria: $categoria) { id titulo autor categoria disponible } }\",\n  \"variables\": {\n    \"categoria\": \"Ficci√≥n\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Filtrar libros por categor√≠a espec√≠fica"
					}
				},
				{
					"name": "‚úÖ Libros Disponibles",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query LibrosDisponibles { librosDisponibles { id titulo autor categoria disponible } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener solo libros marcados como disponibles"
					}
				},
				{
					"name": "‚ûï Crear Libro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearLibro($input: LibroInput!) { crearLibro(input: $input) { id titulo autor categoria disponible createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"titulo\": \"1984\",\n      \"autor\": \"George Orwell\",\n      \"categoria\": \"Ficci√≥n\",\n      \"disponible\": true\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Crear un nuevo libro en la biblioteca"
					}
				},
				{
					"name": "‚úèÔ∏è Actualizar Libro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarLibro($id: ID!, $input: LibroInput!) { actualizarLibro(id: $id, input: $input) { id titulo autor categoria disponible updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"titulo\": \"Animal Farm\",\n      \"autor\": \"George Orwell\",\n      \"categoria\": \"Ficci√≥n\",\n      \"disponible\": false\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar informaci√≥n de un libro existente"
					}
				},
				{
					"name": "üóëÔ∏è Eliminar Libro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation EliminarLibro($id: ID!) { eliminarLibro(id: $id) }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Eliminar un libro del sistema"
					}
				}
			]
		},
		{
			"name": "üë• Miembros",
			"item": [
				{
					"name": "üìã Obtener Todos los Miembros",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerMiembros { miembros { id nombre apellido direccion telefono fechaRegistro createdAt updatedAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista completa de miembros de la biblioteca"
					}
				},
				{
					"name": "üîç Obtener Miembro por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerMiembro($id: ID!) { miembro(id: $id) { id nombre apellido direccion telefono fechaRegistro createdAt updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener informaci√≥n detallada de un miembro espec√≠fico"
					}
				},
				{
					"name": "üë§ Obtener Miembro por User ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerMiembroPorUserId($userId: ID!) { miembroPorUserId(userId: $userId) { id nombre apellido direccion telefono fechaRegistro createdAt updatedAt } }\",\n  \"variables\": {\n    \"userId\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener informaci√≥n del miembro asociado a un usuario espec√≠fico. Ideal para m√≥vil despu√©s del login."
					}
				},
				{
					"name": "‚ûï Crear Miembro (con Auth)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearMiembro($input: MiembroInput!) { crearMiembro(input: $input) { token user { id email } } }\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Juan\",\n      \"apellido\": \"P√©rez\",\n      \"direccion\": \"Av. Libertad 123\",\n      \"telefono\": \"555-0123\",\n      \"email\": \"juan.perez@email.com\",\n      \"password\": \"password123\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar un nuevo miembro en la biblioteca con autenticaci√≥n autom√°tica. Retorna token JWT para login inmediato. Incluye email y password que crean autom√°ticamente un Usuario asociado."
					}
				},
				{
					"name": "‚ûï Crear Miembro (sin Auth)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearMiembroSinAuth($input: MiembroInput!) { crearMiembroSinAuth(input: $input) { id nombre apellido direccion telefono fechaRegistro createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"nombre\": \"Roberto\",\n      \"apellido\": \"Gonz√°lez\",\n      \"direccion\": \"Calle Principal 456\",\n      \"telefono\": \"555-0456\",\n      \"email\": \"roberto.gonzalez@email.com\",\n      \"password\": \"password456\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar un nuevo miembro en la biblioteca sin autenticaci√≥n autom√°tica. Solo retorna los datos del miembro creado. √ötil para registro administrativo."
					}
				},
				{
					"name": "‚úèÔ∏è Actualizar Miembro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarMiembro($id: ID!, $input: MiembroInput!) { actualizarMiembro(id: $id, input: $input) { id nombre apellido direccion telefono updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"nombre\": \"Juan Carlos\",\n      \"apellido\": \"P√©rez Gonz√°lez\",\n      \"direccion\": \"Av. Libertad 456\",\n      \"telefono\": \"555-0456\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar informaci√≥n de un miembro existente"
					}
				},
				{
					"name": "üóëÔ∏è Eliminar Miembro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation EliminarMiembro($id: ID!) { eliminarMiembro(id: $id) }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Eliminar un miembro del sistema"
					}
				}
			]
		},
		{
			"name": "üìã Pr√©stamos",
			"item": [
				{
					"name": "üìã Obtener Todos los Pr√©stamos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerPrestamos { prestamos { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId createdAt updatedAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista completa de pr√©stamos con informaci√≥n de libro y miembro asociados"
					}
				},
				{
					"name": "üîç Obtener Pr√©stamo por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerPrestamo($id: ID!) { prestamo(id: $id) { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId createdAt updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener informaci√≥n detallada de un pr√©stamo espec√≠fico incluyendo IDs de libro y miembro"
					}
				},
				{
					"name": "üü¢ Pr√©stamos Activos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query PrestamosActivos { prestamosActivos { id fechaPrestamo fechaDevolucionEsperada estado multa } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener pr√©stamos que a√∫n no han sido devueltos (estado=true)"
					}
				},
				{
					"name": "‚ö†Ô∏è Pr√©stamos Vencidos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query PrestamosVencidos { prestamosVencidos { id fechaPrestamo fechaDevolucionEsperada estado multa } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener pr√©stamos que han pasado su fecha de devoluci√≥n esperada"
					}
				},
				{
					"name": "üí∞ Pr√©stamos con Multa",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query PrestamosConMulta { prestamosConMulta { id fechaPrestamo fechaDevolucionEsperada multa estado } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener pr√©stamos que tienen multa aplicada"
					}
				},
				{
					"name": "‚ûï Crear Pr√©stamo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearPrestamo($input: PrestamoInput!) { crearPrestamo(input: $input) { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId createdAt updatedAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"fechaPrestamo\": \"2025-11-10T15:00:00\",\n      \"fechaDevolucionEsperada\": \"2025-11-24T15:00:00\",\n      \"fechaDevolucionReal\": null,\n      \"estado\": true,\n      \"multa\": null,\n      \"libroId\": 1,\n      \"miembroId\": 1\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar un nuevo pr√©stamo de libro. REQUIERE: libroId (ID del libro a prestar) y miembroId (ID del miembro que solicita el pr√©stamo)"
					}
				},
				{
					"name": "‚úèÔ∏è Actualizar Pr√©stamo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarPrestamo($id: ID!, $input: PrestamoInput!) { actualizarPrestamo(id: $id, input: $input) { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"fechaPrestamo\": \"2025-11-10T10:00:00\",\n      \"fechaDevolucionEsperada\": \"2025-11-25T10:00:00\",\n      \"fechaDevolucionReal\": \"2025-11-20T15:30:00\",\n      \"estado\": false,\n      \"multa\": 5.0,\n      \"libroId\": 1,\n      \"miembroId\": 1\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar informaci√≥n de un pr√©stamo existente. INCLUYE: libroId y miembroId para cambiar las relaciones del pr√©stamo si es necesario"
					}
				},
				{
					"name": "üìö Marcar como Devuelto",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation MarcarComoDevuelto($id: ID!) { marcarComoDevuelto(id: $id) { id fechaDevolucionReal estado updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Marcar un pr√©stamo como devuelto autom√°ticamente"
					}
				},
				{
					"name": "üí∞ Aplicar Multa",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation AplicarMulta($id: ID!, $montoMulta: Float!) { aplicarMulta(id: $id, montoMulta: $montoMulta) { id multa updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"montoMulta\": 15.50\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Aplicar una multa espec√≠fica a un pr√©stamo"
					}
				},
				{
					"name": "üóëÔ∏è Eliminar Pr√©stamo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation EliminarPrestamo($id: ID!) { eliminarPrestamo(id: $id) }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Eliminar un pr√©stamo del sistema"
					}
				},
				{
					"name": "üìö Ejemplo Completo - Crear Pr√©stamo con Validaciones",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearPrestamoCompleto($input: PrestamoInput!) { crearPrestamo(input: $input) { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId createdAt updatedAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"fechaPrestamo\": \"2025-11-10T09:00:00\",\n      \"fechaDevolucionEsperada\": \"2025-12-10T18:00:00\",\n      \"fechaDevolucionReal\": null,\n      \"estado\": true,\n      \"multa\": 0.0,\n      \"libroId\": 1,\n      \"miembroId\": 1\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Ejemplo completo para crear pr√©stamo. NOTA: Aseg√∫rate de que el libroId y miembroId existan en la base de datos antes de ejecutar."
					}
				},
				{
					"name": "üîÑ Renovar Pr√©stamo (Extender Fecha)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation RenovarPrestamo($id: ID!, $input: PrestamoInput!) { actualizarPrestamo(id: $id, input: $input) { id fechaPrestamo fechaDevolucionEsperada fechaDevolucionReal estado multa libroId miembroId updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"fechaPrestamo\": \"2025-11-10T09:00:00\",\n      \"fechaDevolucionEsperada\": \"2025-12-25T18:00:00\",\n      \"fechaDevolucionReal\": null,\n      \"estado\": true,\n      \"multa\": 0.0,\n      \"libroId\": 1,\n      \"miembroId\": 1\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Renovar un pr√©stamo extendiendo la fecha de devoluci√≥n esperada. √ötil para prolongar pr√©stamos activos."
					}
				}
			]
		},
		{
			"name": "üë§ Usuarios",
			"item": [
				{
					"name": "üìã Obtener Todos los Usuarios",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerUsuarios { usuarios { id email password createdAt updatedAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista completa de usuarios del sistema"
					}
				},
				{
					"name": "üîç Obtener Usuario por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerUsuario($id: ID!) { usuario(id: $id) { id email password createdAt updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener informaci√≥n detallada de un usuario espec√≠fico"
					}
				},
				{
					"name": "üîç Buscar Usuarios por Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query BuscarUsuariosPorEmail($emailParcial: String!) { usuariosPorEmail(emailParcial: $emailParcial) { id email createdAt } }\",\n  \"variables\": {\n    \"emailParcial\": \"biblioteca\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Buscar usuarios que contengan un texto espec√≠fico en su email"
					}
				},
				{
					"name": "üÜï Usuarios Recientes",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query UsuariosRecientes { usuariosRecientes { id email createdAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener usuarios ordenados por fecha de creaci√≥n (m√°s recientes primero)"
					}
				},
				{
					"name": "üìä Total de Usuarios",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query TotalUsuarios { totalUsuarios }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener contador total de usuarios en el sistema"
					}
				},
				{
					"name": "‚ûï Crear Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearUsuario($input: UsuarioInput!) { crearUsuario(input: $input) { id email createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"admin@biblioteca.com\",\n      \"password\": \"123456\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Crear un nuevo usuario en el sistema (CRUD - diferente del registro con auth)"
					}
				},
				{
					"name": "‚úèÔ∏è Actualizar Usuario Completo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarUsuario($id: ID!, $input: UsuarioInput!) { actualizarUsuario(id: $id, input: $input) { id email updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"email\": \"nuevoadmin@biblioteca.com\",\n      \"password\": \"newpassword123\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar informaci√≥n completa de un usuario existente"
					}
				},
				{
					"name": "üìß Actualizar Solo Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarEmailUsuario($id: ID!, $nuevoEmail: String!) { actualizarEmailUsuario(id: $id, nuevoEmail: $nuevoEmail) { id email updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"nuevoEmail\": \"correonuevo@biblioteca.com\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar √∫nicamente el email de un usuario"
					}
				},
				{
					"name": "üîí Actualizar Solo Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarPasswordUsuario($id: ID!, $nuevoPassword: String!) { actualizarPasswordUsuario(id: $id, nuevoPassword: $nuevoPassword) { id email updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"nuevoPassword\": \"newSecurePassword123\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar √∫nicamente la contrase√±a de un usuario"
					}
				},
				{
					"name": "üóëÔ∏è Eliminar Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation EliminarUsuario($id: ID!) { eliminarUsuario(id: $id) }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Eliminar un usuario del sistema"
					}
				}
			]
		},
		{
			"name": "üö™ Acceso Biblioteca",
			"item": [
				{
					"name": "üìã Obtener Todos los Accesos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerAccesos { accesos { id fechaEntrada fechaSalida metodoAcceso codigoQr estado miembroId miembroNombre miembroApellido createdAt updatedAt } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista completa de registros de acceso a la biblioteca"
					}
				},
				{
					"name": "üîç Obtener Acceso por ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ObtenerAcceso($id: ID!) { acceso(id: $id) { id fechaEntrada fechaSalida metodoAcceso codigoQr estado miembroId miembroNombre miembroApellido createdAt updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener informaci√≥n detallada de un acceso espec√≠fico"
					}
				},
				{
					"name": "‚úÖ Verificar si Miembro est√° Adentro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query MiembroEstaAdentro($miembroId: ID!) { miembroEstaAdentro(miembroId: $miembroId) }\",\n  \"variables\": {\n    \"miembroId\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Verificar si un miembro espec√≠fico est√° actualmente dentro de la biblioteca"
					}
				},
				{
					"name": "üè¢ Miembros Actualmente Adentro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query MiembrosAdentro { miembrosAdentro { id fechaEntrada miembroId miembroNombre miembroApellido metodoAcceso } }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener lista de miembros que est√°n actualmente dentro de la biblioteca"
					}
				},
				{
					"name": "üìä Historial de Miembro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query HistorialMiembro($miembroId: ID!) { historialMiembro(miembroId: $miembroId) { id fechaEntrada fechaSalida metodoAcceso estado } }\",\n  \"variables\": {\n    \"miembroId\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Obtener historial completo de accesos de un miembro espec√≠fico"
					}
				},
				{
					"name": "üìà Reporte de Accesos por Fechas",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"query ReporteAccesos($fechaInicio: String!, $fechaFin: String!) { reporteAccesos(fechaInicio: $fechaInicio, fechaFin: $fechaFin) { id fechaEntrada fechaSalida miembroNombre miembroApellido metodoAcceso } }\",\n  \"variables\": {\n    \"fechaInicio\": \"2025-11-01T00:00:00\",\n    \"fechaFin\": \"2025-11-30T23:59:59\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Generar reporte de accesos en un rango de fechas espec√≠fico"
					}
				},
				{
					"name": "‚ûï Crear Acceso",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation CrearAcceso($input: AccesoBibliotecaInput!) { crearAcceso(input: $input) { id fechaEntrada metodoAcceso codigoQr estado miembroId createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"fechaEntrada\": \"2025-11-08T10:00:00\",\n      \"fechaSalida\": null,\n      \"metodoAcceso\": \"QR_MOVIL\",\n      \"codigoQr\": \"BIBLIO-ABC123\",\n      \"estado\": true,\n      \"miembroId\": \"1\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar un nuevo acceso a la biblioteca (CRUD b√°sico)"
					}
				},
				{
					"name": "‚úèÔ∏è Actualizar Acceso",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation ActualizarAcceso($id: ID!, $input: AccesoBibliotecaInput!) { actualizarAcceso(id: $id, input: $input) { id fechaEntrada fechaSalida metodoAcceso codigoQr estado updatedAt } }\",\n  \"variables\": {\n    \"id\": \"1\",\n    \"input\": {\n      \"fechaEntrada\": \"2025-11-08T10:00:00\",\n      \"fechaSalida\": \"2025-11-08T18:00:00\",\n      \"metodoAcceso\": \"QR_MOVIL\",\n      \"codigoQr\": \"BIBLIO-ABC123\",\n      \"estado\": false,\n      \"miembroId\": \"1\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Actualizar informaci√≥n de un acceso existente"
					}
				},
				{
					"name": "üóëÔ∏è Eliminar Acceso",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation EliminarAcceso($id: ID!) { eliminarAcceso(id: $id) }\",\n  \"variables\": {\n    \"id\": \"1\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Eliminar un registro de acceso del sistema"
					}
				},
				{
					"name": "üî≥ Generar C√≥digo QR",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation GenerarCodigoQR { generarCodigoQR }\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Generar un c√≥digo QR √∫nico para uso en ingreso/egreso m√≥vil"
					}
				},
				{
					"name": "üì≤ Registrar Ingreso (M√≥vil)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation RegistrarIngreso($miembroId: ID!, $codigoQr: String!) { registrarIngreso(miembroId: $miembroId, codigoQr: $codigoQr) { accesoId miembroId miembroNombre miembroApellido fechaEntrada tipoAccion mensaje exitoso } }\",\n  \"variables\": {\n    \"miembroId\": \"1\",\n    \"codigoQr\": \"BIBLIO-ABC123\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar ingreso de miembro escaneando c√≥digo QR (desde app m√≥vil)"
					}
				},
				{
					"name": "üì± Registrar Egreso (M√≥vil)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"mutation RegistrarEgreso($miembroId: ID!, $codigoQr: String!) { registrarEgreso(miembroId: $miembroId, codigoQr: $codigoQr) { accesoId miembroId miembroNombre miembroApellido fechaEntrada fechaSalida tipoAccion mensaje exitoso } }\",\n  \"variables\": {\n    \"miembroId\": \"1\",\n    \"codigoQr\": \"BIBLIO-ABC123\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:8080/graphql",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["graphql"]
						},
						"description": "Registrar egreso de miembro escaneando c√≥digo QR (desde app m√≥vil)"
					}
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-extract JWT token from login responses",
					"if (pm.response.json() && pm.response.json().data && pm.response.json().data.login) {",
					"    const token = pm.response.json().data.login.token;",
					"    pm.environment.set('jwt_token', token);",
					"    console.log('JWT Token saved from login:', token);",
					"}",
					"",
					"// Auto-extract JWT token from registration responses",
					"if (pm.response.json() && pm.response.json().data && pm.response.json().data.registrar) {",
					"    const token = pm.response.json().data.registrar.token;",
					"    pm.environment.set('jwt_token', token);",
					"    console.log('JWT Token saved from registration:', token);",
					"}",
					"",
					"// Auto-extract JWT token from member creation with auth",
					"if (pm.response.json() && pm.response.json().data && pm.response.json().data.crearMiembro) {",
					"    const token = pm.response.json().data.crearMiembro.token;",
					"    if (token) {",
					"        pm.environment.set('jwt_token', token);",
					"        console.log('JWT Token saved from member creation:', token);",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "graphql_endpoint",
			"value": "{{base_url}}/graphql",
			"type": "string"
		}
	]
}